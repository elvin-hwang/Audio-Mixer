(this.webpackJsonpsoundappreact=this.webpackJsonpsoundappreact||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(21),o=n.n(r),s=(n(86),n(87),n(78)),u=n(5),l=(n(19),n(32)),c=n(80),d=n(8),m=n(9),h=n(13),p=n(12),f=n(122),v=n(38),y=n.n(v),g=n(39),b=n.n(g),w=n(40),E=n.n(w),k=n(41),x=n.n(k),S=n(42),O=n.n(S),C=n(43),A=n.n(C),I=n(44),j=n.n(I),M=n(66),L=n.n(M),N=n(45),P=n.n(N),D=n(67),R=n.n(D),B=n(46),T=n.n(B),H=n(47),W=n.n(H),U=n(48),z=n.n(U),F=n(49),G=n.n(F),J=n(50),K=n.n(J),Y=n(51),$=n.n(Y),V=n(68),Z=n.n(V),_=n(69),q=n.n(_),Q=n(70),X=n.n(Q),ee=n(52),te=n.n(ee),ne=n(53),ae=n.n(ne),ie=n(54),re=n.n(ie),oe=n(55),se=n.n(oe),ue=n(18),le=new(window.AudioContext||window.webkitAudioContext),ce=new(function(){function e(){Object(d.a)(this,e),e.soundManager||(this.sounds={},this.playlist=[],this.finishedPlaying=[],e.soundManager=this)}return Object(m.a)(e,[{key:"addSound",value:function(e){this.sounds[e.name]=e}},{key:"endedHandler",value:function(e){this.finishedPlaying.push(!0)}},{key:"refreshPlaylist",value:function(){var e=this;this.playlist=[],this.finishedPlaying=[],Object.keys(this.sounds).map((function(t){var n=e.sounds[t],a=n.soundBuffer,i=le.createBufferSource();i.buffer=a,i.playbackRate.value=n.soundMods.speed,i.onended=e.endedHandler.bind(e),i.connect(n.gainNode).connect(le.destination),e.playlist.push(i)}))}},{key:"playSounds",value:function(){this.refreshPlaylist();var e,t=Object(ue.a)(this.playlist);try{for(t.s();!(e=t.n()).done;){e.value.start()}}catch(n){t.e(n)}finally{t.f()}}},{key:"stopSounds",value:function(){var e,t=Object(ue.a)(this.playlist);try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(n){t.e(n)}finally{t.f()}}},{key:"isPlaying",value:function(){return this.finishedPlaying.length!=this.playlist.length}},{key:"removeSound",value:function(e){return!!this.sounds[e]&&(delete this.sounds[e],!0)}},{key:"clearSounds",value:function(){this.sounds={}}}]),e}()),de={TrumpMillionDollar:new Audio(y.a),TrumpAmerica:new Audio(b.a),TrumpBigger:new Audio(E.a),TrumpRich:new Audio(x.a),Atmosphere:new Audio(O.a),AtmosphereHigh:new Audio(A.a),BuildUp:new Audio(j.a),Drop:new Audio(P.a),HighChorus:new Audio(W.a),Hat:new Audio(T.a),Kick:new Audio(z.a),Snare:new Audio(te.a),LofiDrum:new Audio(G.a),MidChorus:new Audio(K.a),Organ:new Audio($.a),SnareBuild:new Audio(ae.a),SynthChorus:new Audio(re.a),Wobble:new Audio(se.a)},me={TrumpMillionDollar:y.a,TrumpAmerica:b.a,TrumpBigger:E.a,TrumpRich:x.a,Atmosphere:O.a,AtmosphereHigh:A.a,BuildUp:j.a,Buong:L.a,Drop:P.a,ElectroChorus:R.a,Hat:T.a,HighChorus:W.a,Kick:z.a,LofiDrum:G.a,MidChorus:K.a,Organ:$.a,PianoBackground:Z.a,PianoChorus:q.a,ShakerLoop:X.a,Snare:te.a,SnareBuild:ae.a,SynthChorus:re.a,Wobble:se.a},he=n(88),pe=n(91),fe=function(){function e(t,n,a,i){var r=this;Object(d.a)(this,e),this.id=t,this.pos=n,this.name=a,this.soundMods=i,this.gainNode=this.getGainNode(),this.color="hsl("+360*Math.random()+", 100%, 75%)",this.setUpAudio().then((function(e){r.soundBuffer=e})).catch((function(e){throw"Error while setting up Audio: "+e}))}return Object(m.a)(e,[{key:"setUpAudio",value:function(){var e=this,t=null;if(Object.keys(me).map((function(n){n.toLowerCase()==e.id.toLowerCase()&&(e.id=n,t=me[n])})),!t)throw"Invalid sound found: "+this.id;return he(t).then((function(t){if(e.soundMods.length){if(e.soundMods.interval){var n=t.duration+e.soundMods.interval*e.soundMods.speed-t.duration;t=pe.resize(t,t.sampleRate*n)}var a=Math.ceil(e.soundMods.length/t.duration*e.soundMods.speed);t=pe.repeat(t,a),t=pe.resize(t,t.sampleRate*e.soundMods.length*e.soundMods.speed)}var i=e.pos*e.soundMods.speed;if(i){var r=le.createBuffer(1,le.sampleRate*i,le.sampleRate);t=pe.concat(r,t)}var o=60*e.soundMods.speed;return t.duration>o&&(t=pe.resize(t,t.sampleRate*o)),t})).catch((function(t){return console.log(t),e.setUpAudio()}))}},{key:"getGainNode",value:function(){var e=le.createGain();return e.gain.value=this.soundMods.volume/100,e}}]),e}(),ve=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={sounds:[]},a}return Object(m.a)(n,[{key:"onClick",value:function(e){e.play()}},{key:"componentDidMount",value:function(){for(var e=this,t=function(){var t=Object(c.a)(a[n],2),i=t[0],r=t[1];r.onloadeddata=function(){var e=r.duration,t={name:i,sound:r,duration:e};this.setState({sounds:[].concat(Object(l.a)(this.state.sounds),[t])})}.bind(e)},n=0,a=Object.entries(de);n<a.length;n++)t()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h3",null,"Click here to listen to sounds!"),i.a.createElement("div",{className:"buttons"},this.state.sounds.map((function(t){return i.a.createElement("div",{key:t.name},i.a.createElement(f.a,{onClick:function(){return e.onClick(t.sound)},variant:"info",size:"lg"},t.name),i.a.createElement("h6",null,i.a.createElement("small",{className:"text-muted"},"dur: ",Math.round(100*t.duration)/100,"s")))}))))}}]),n}(a.Component),ye=n(23),ge=n(123);function be(e){if(e.startsWith("Add"))!function(e){var t=e.split(","),n=function(e){var t,n,a=e.split(" "),i=-1;if(5!=a.length||"as"!=a[1].trim()||"at"!=a[3])throw"Invalid Parameter in Add: "+e;t=we(a[0].replace("sound_","").trim()),n=we(a[2]),isNaN(a[4])||(i=parseFloat(a[4]));if(i<0||i>=60)throw"Invalid Parameter in Add: "+e;return{soundID:t,soundPos:i,soundName:n}}(t.shift()),a=function(e){var t,n={length:null,interval:null,volume:100,speed:1},a=Object(ue.a)(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n=Ee(i,n)}}catch(r){a.e(r)}finally{a.f()}return n}(t),i=new fe(n.soundID,n.soundPos,n.soundName,a);ce.addSound(i)}(e.replace("Add","").trim());else if(e.startsWith("Remove")){!function(e){if(!ce.removeSound(e))throw"Invalid ID in Remove Sound: "+e}(we(e.replace("Remove","").trim()))}else{if(!e.startsWith("Restart"))throw"Invalid command found: "+e;if(e=e.replace("Restart","").trim())throw"Additional Parameter(s) Found in Restart Command: "+e;ce.clearSounds()}}function we(e){if(!e.match(/^[A-Za-z0-9]+$/))throw"Invalid Sound ID specified: "+e;return e}function Ee(e,t){var n=e.trim().split(" ");if(0==n.length||1==n.length)throw"Invalid Effects: "+e;switch(n[0].trim()){case"length":if(2!=n.length&&4!=n.length)throw"Invalid Parameters in Length: "+n;if(t.length=ke(n[1]),4==n.length&&(t.interval=ke(n[3]),t.interval>=60||t.interval<=0))throw"Invalid Parameters in Interval: "+n;if(t.length>60||t.length<=0)throw"Invalid Parameters in Length: "+n;break;case"volume":var a=parseInt(n[1]);if(2!=n.length||a<0||a>=300)throw"Invalid Parameters in Volume: "+n;t.volume=a;break;case"speed":if(2!=n.length)throw console.log(n),"Invalid Parameters in Speed: "+n;if(t.speed=ke(n[1]),t.speed<=0||t.speed>=3)throw console.log(n),"Invalid Parameters in Speed: "+n;break;default:throw"Invalid Effect Type: "+n}return t}function ke(e){try{return parseFloat(e)}catch(t){throw"Error while parsing float value: "+e}}var xe=n(71),Se=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={soundLines:[]},a.containerRef=i.a.createRef(),a.getRectsInterval=void 0,a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getRectsInterval=setInterval((function(){var t=e.containerRef.current.getBoundingClientRect();e.setState({soundLines:e.getSoundLines(t)})}),10)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getRectsInterval)}},{key:"getSoundLines",value:function(e){return Object.keys(ce.sounds).map((function(t,n){return i.a.createElement(Ce,{sound:ce.sounds[t],canvas:e,index:n+1,key:t})}))}},{key:"renderLines",value:function(){return Array(15).fill(null).map((function(e,t){return i.a.createElement(Oe,{left:6.7*t,index:t,key:t})}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"soundTable"},i.a.createElement(Ae,{soundList:ce.sounds}),i.a.createElement("div",{className:"linesContainer",ref:this.containerRef},i.a.createElement("div",{className:"soundLabelPadding"}),this.renderLines(),this.state.soundLines))}}]),n}(a.Component),Oe=function(e){var t=e.left,n=e.index,a=parseInt(4*n);return i.a.createElement("div",{className:"verticalLine",style:{left:"".concat(t,"%")}},i.a.createElement("p",{className:"time"}," ",a))},Ce=function(e){var t=e.sound,n=e.canvas,a=e.index,r=function(e,t,n){if(!e.soundBuffer)return[];var a=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,i=[],r=t.width/60,o=a+t.top,s=.05*t.height*n+.01*t.height,u=o+s,l=t.left+2+r*e.pos,c=r*e.soundMods.length,d=r*de[e.id].duration*e.soundMods.speed;e.soundMods.length&&!e.soundMods.interval&&(d=c);var m=l+d;m>=t.right&&(m=t.right-2);if(i.push({x0:l,x1:m,y:u}),e.soundMods.interval){var h=r*e.soundMods.interval,p=l+c;p>=t.right&&(p=t.right-2);for(var f=l+h;f<p;f+=h)m=f+d>=p?p:f+d,i.push({x0:f,x1:m,y:u})}return i}(t,n,a);return i.a.createElement("div",{className:"soundLineRow"},r.map((function(e){return i.a.createElement(xe.Line,{key:"2",x0:e.x0,y0:e.y,x1:e.x1,y1:e.y,borderColor:t.color,borderWidth:5,borderStyle:"outset"})})))},Ae=function(e){var t=e.soundList;return i.a.createElement("div",{className:"soundLabelContainer"},i.a.createElement("div",{className:"soundLabelPadding"},"Time"),Object.keys(t).map((function(e){return i.a.createElement("div",{key:e,className:"soundLabel"},e)})))};var Ie=Se,je=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={playing:!1,display:"Play",time:0,start:0},a}return Object(m.a)(n,[{key:"playOrPause",value:function(){this.state.playing?this.stopSounds():this.playSounds()}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var e=ce.isPlaying();e||clearInterval(this.timer),this.setState({playing:e,display:e?"Stop":"Play"})}},{key:"playSounds",value:function(){var e=this;Object.keys(ce.sounds).length&&(ce.playSounds(),this.setState({time:0,start:Date.now()}),this.timer=setInterval((function(){return e.setState({time:Date.now()-e.state.start})}),10))}},{key:"stopSounds",value:function(){ce.stopSounds(),clearInterval(this.timer)}},{key:"displayTime",value:function(){return Math.round(this.state.time/1e3*100)/100}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{class:"timerContainer"},i.a.createElement(f.a,{onClick:function(){return e.playOrPause()},variant:"success",type:"button",style:{marginRight:"20px"}},this.state.display),i.a.createElement("div",{class:"timer"}," ",this.displayTime().toFixed(2)," seconds "))}}]),n}(a.Component),Me=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={commandOutput:[],commandInput:""},a.handleSubmit=a.handleSubmit.bind(Object(ye.a)(a)),a.handleChange=a.handleChange.bind(Object(ye.a)(a)),a}return Object(m.a)(n,[{key:"handleChange",value:function(e){this.setState({commandInput:e.target.value})}},{key:"handleSubmit",value:function(e){var t;e.preventDefault();try{!function(e){var t,n=e.split(";"),a=Object(ue.a)(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;(i=i.trim())&&be(i)}}catch(r){a.e(r)}finally{a.f()}}(this.state.commandInput),t={time:(new Date).toLocaleString(),text:e.target.DSLCommand.value,error:null}}catch(n){console.error(n),t={time:(new Date).toLocaleString(),text:e.target.DSLCommand.value,error:n}}this.setState({commandOutput:[].concat(Object(l.a)(this.state.commandOutput),[t])}),this.setState({commandInput:""})}},{key:"playSounds",value:function(){ce.playSounds()}},{key:"render",value:function(){return i.a.createElement("div",{className:"allContent"},i.a.createElement("div",{className:"flex-child-input"},i.a.createElement("div",{className:"inputform"},i.a.createElement(ge.a,{onSubmit:this.handleSubmit},i.a.createElement(ge.a.Group,{controlId:"DSLCommand"},i.a.createElement(ge.a.Label,null,"Input DSL Command Here"),i.a.createElement(ge.a.Control,{as:"textarea",rows:"10",type:"text",name:"DSLCommand",value:this.state.commandInput,onChange:this.handleChange}),i.a.createElement(ge.a.Text,{className:"text-muted"},"Please enter DSL text commands here")),i.a.createElement(f.a,{variant:"info",type:"submit"},"Submit"))),i.a.createElement(je,null),i.a.createElement("br",null),i.a.createElement("h3",null,"Commands History"),i.a.createElement("div",{className:"commandsHistory"},0==this.state.commandOutput.length&&i.a.createElement("h5",null,i.a.createElement("small",{className:"text-muted"},"You have not executed any commands yet")),this.state.commandOutput.slice().reverse().map((function(e){return i.a.createElement("div",{key:e},!e.error&&i.a.createElement("h5",null,i.a.createElement("i",null,i.a.createElement("small",null,e.time)," "),i.a.createElement("small",null,e.text)),e.error&&i.a.createElement("h5",{className:"text-danger"},i.a.createElement("i",null,i.a.createElement("small",null,e.time)," "),i.a.createElement("small",null,e.error)))})))),i.a.createElement(Ie,{class:"flex-child-table"}))}}]),n}(a.Component);var Le=function(){return i.a.createElement("div",{className:"commands"},i.a.createElement(ve,null),i.a.createElement(Me,null))},Ne=n(124),Pe=n(125),De=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"render",value:function(){return i.a.createElement(Ne.a,{bg:"info",expand:"lg"},i.a.createElement(Ne.a.Brand,{className:"text-white",href:"https://elvin-hwang.github.io/Audio-Mixer/"},"SOUNDAPP"),i.a.createElement(Ne.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(Pe.a,null,i.a.createElement(Pe.a.Link,{className:"d-inline p-2 text-white",href:"https://elvin-hwang.github.io/Audio-Mixer/#/dsl"},"Our DSL")))}}]),n}(a.Component),Re=n(126),Be=n(77),Te=n.n(Be);var He=function(){return i.a.createElement("div",{className:"inputform"},i.a.createElement(Re.a,{class:"figurepic"},i.a.createElement(Re.a.Image,{src:Te.a}),i.a.createElement(Re.a.Caption,null,"DSL Example")))};n(117);var We=function(){return i.a.createElement(s.a,{basename:"/Audio-Mixer"},i.a.createElement("div",{className:"App"},i.a.createElement(De,null),i.a.createElement("div",{className:"App-header"},i.a.createElement(u.c,null,i.a.createElement(u.a,{path:"/",component:Le,exact:!0}),i.a.createElement(u.a,{path:"/dsl",component:He})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(We,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},19:function(e,t,n){},38:function(e,t,n){e.exports=n.p+"static/media/trump-A-Million-Dollars.e0aac125.wav"},39:function(e,t,n){e.exports=n.p+"static/media/trump-America.87d2ed07.wav"},40:function(e,t,n){e.exports=n.p+"static/media/trump-bigger.3560f2cc.wav"},41:function(e,t,n){e.exports=n.p+"static/media/trump-Im-Really-Rich.fe46ed95.wav"},42:function(e,t,n){e.exports=n.p+"static/media/atmosphere.5b163b2d.wav"},43:function(e,t,n){e.exports=n.p+"static/media/atmosphereHigh.5a966d8c.wav"},44:function(e,t,n){e.exports=n.p+"static/media/buildup.f1514e0d.wav"},45:function(e,t,n){e.exports=n.p+"static/media/drop.04530777.wav"},46:function(e,t,n){e.exports=n.p+"static/media/hat.afb28490.wav"},47:function(e,t,n){e.exports=n.p+"static/media/HighChorus.0df2e0f1.wav"},48:function(e,t,n){e.exports=n.p+"static/media/kick.5b1bcb70.wav"},49:function(e,t,n){e.exports=n.p+"static/media/lofiDrum.ee5fac94.wav"},50:function(e,t,n){e.exports=n.p+"static/media/MidChorus.d3e451db.wav"},51:function(e,t,n){e.exports=n.p+"static/media/organ.8f4f6a9c.wav"},52:function(e,t,n){e.exports=n.p+"static/media/snare.91a6ded8.wav"},53:function(e,t,n){e.exports=n.p+"static/media/snareBuild.a5462aed.wav"},54:function(e,t,n){e.exports=n.p+"static/media/SynthChorus.fc388833.wav"},55:function(e,t,n){e.exports=n.p+"static/media/Wobble.6cb16ac1.wav"},66:function(e,t,n){e.exports=n.p+"static/media/buong.ba43e9e0.wav"},67:function(e,t,n){e.exports=n.p+"static/media/electroChorus.24e14281.wav"},68:function(e,t,n){e.exports=n.p+"static/media/PianoBackground.a81654dc.wav"},69:function(e,t,n){e.exports=n.p+"static/media/PianoChorus.ace88ae7.wav"},70:function(e,t,n){e.exports=n.p+"static/media/shakerLoop.ba6d7136.wav"},77:function(e,t,n){e.exports=n.p+"static/media/dsl.25222323.png"},81:function(e,t,n){e.exports=n(120)},86:function(e,t,n){},87:function(e,t,n){}},[[81,1,2]]]);
//# sourceMappingURL=main.2f46c76e.chunk.js.map