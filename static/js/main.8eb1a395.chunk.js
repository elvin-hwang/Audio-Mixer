(this.webpackJsonpsoundappreact=this.webpackJsonpsoundappreact||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(22),r=a.n(i),s=(a(88),a(89),a(80)),l=a(5),u=(a(19),a(34)),d=a(82),c=a(8),m=a(9),h=a(14),p=a(13),v=a(124),f=a(40),g=a.n(f),y=a(41),b=a.n(y),w=a(42),E=a.n(w),k=a(43),A=a.n(k),x=a(44),S=a.n(x),O=a(45),C=a.n(O),I=a(46),j=a.n(I),M=a(68),N=a.n(M),L=a(47),P=a.n(L),D=a(69),R=a.n(D),_=a(48),B=a.n(_),T=a(49),H=a.n(T),W=a(50),K=a.n(W),U=a(51),F=a.n(U),z=a(52),G=a.n(z),Y=a(53),J=a.n(Y),$=a(70),q=a.n($),V=a(71),Z=a.n(V),Q=a(72),X=a.n(Q),ee=a(54),te=a.n(ee),ae=a(55),ne=a.n(ae),oe=a(56),ie=a.n(oe),re=a(57),se=a.n(re),le=a(18),ue=new(window.AudioContext||window.webkitAudioContext),de=new(function(){function e(){Object(c.a)(this,e),e.soundManager||(this.sounds={},this.playlist=[],this.finishedPlaying=[],e.soundManager=this)}return Object(m.a)(e,[{key:"addSound",value:function(e){this.sounds[e.name]=e}},{key:"endedHandler",value:function(e){this.finishedPlaying.push(!0)}},{key:"refreshPlaylist",value:function(){var e=this;this.playlist=[],this.finishedPlaying=[],Object.keys(this.sounds).map((function(t){var a=e.sounds[t],n=a.soundBuffer,o=ue.createBufferSource();o.buffer=n,o.playbackRate.value=a.soundMods.speed,o.onended=e.endedHandler.bind(e),o.connect(a.gainNode).connect(ue.destination),e.playlist.push(o)}))}},{key:"playSounds",value:function(){this.refreshPlaylist();var e,t=Object(le.a)(this.playlist);try{for(t.s();!(e=t.n()).done;){e.value.start()}}catch(a){t.e(a)}finally{t.f()}}},{key:"stopSounds",value:function(){var e,t=Object(le.a)(this.playlist);try{for(t.s();!(e=t.n()).done;){e.value.stop()}}catch(a){t.e(a)}finally{t.f()}}},{key:"isPlaying",value:function(){return this.finishedPlaying.length!=this.playlist.length}},{key:"removeSound",value:function(e){return!!this.sounds[e]&&(delete this.sounds[e],!0)}},{key:"clearSounds",value:function(){this.sounds={}}}]),e}()),ce={TrumpMillionDollar:new Audio(g.a),TrumpAmerica:new Audio(b.a),TrumpBigger:new Audio(E.a),TrumpRich:new Audio(A.a),Atmosphere:new Audio(S.a),AtmosphereHigh:new Audio(C.a),BuildUp:new Audio(j.a),Drop:new Audio(P.a),HighChorus:new Audio(H.a),Hat:new Audio(B.a),Kick:new Audio(K.a),Snare:new Audio(te.a),LofiDrum:new Audio(F.a),MidChorus:new Audio(G.a),Organ:new Audio(J.a),SnareBuild:new Audio(ne.a),SynthChorus:new Audio(ie.a),Wobble:new Audio(se.a)},me={TrumpMillionDollar:g.a,TrumpAmerica:b.a,TrumpBigger:E.a,TrumpRich:A.a,Atmosphere:S.a,AtmosphereHigh:C.a,BuildUp:j.a,Buong:N.a,Drop:P.a,ElectroChorus:R.a,Hat:B.a,HighChorus:H.a,Kick:K.a,LofiDrum:F.a,MidChorus:G.a,Organ:J.a,PianoBackground:q.a,PianoChorus:Z.a,ShakerLoop:X.a,Snare:te.a,SnareBuild:ne.a,SynthChorus:ie.a,Wobble:se.a},he=a(90),pe=a(93),ve=function(){function e(t,a,n,o){var i=this;Object(c.a)(this,e),this.id=t,this.pos=a,this.name=n,this.soundMods=o,this.gainNode=this.getGainNode(),this.color="hsl("+360*Math.random()+", 100%, 75%)",this.setUpAudio().then((function(e){i.soundBuffer=e})).catch((function(e){throw"Error while setting up Audio: "+e}))}return Object(m.a)(e,[{key:"setUpAudio",value:function(){var e=this,t=null;if(Object.keys(me).map((function(a){a.toLowerCase()==e.id.toLowerCase()&&(e.id=a,t=me[a])})),!t)throw"Invalid sound found: "+this.id;return he(t).then((function(t){if(e.soundMods.length){if(e.soundMods.interval){var a=t.duration+e.soundMods.interval*e.soundMods.speed-t.duration;t=pe.resize(t,t.sampleRate*a)}var n=Math.ceil(e.soundMods.length/t.duration*e.soundMods.speed);t=pe.repeat(t,n),t=pe.resize(t,t.sampleRate*e.soundMods.length*e.soundMods.speed)}var o=e.pos*e.soundMods.speed;if(o){var i=ue.createBuffer(1,ue.sampleRate*o,ue.sampleRate);t=pe.concat(i,t)}var r=60*e.soundMods.speed;return t.duration>r&&(t=pe.resize(t,t.sampleRate*r)),t})).catch((function(t){return console.log(t),e.setUpAudio()}))}},{key:"getGainNode",value:function(){var e=ue.createGain();return e.gain.value=this.soundMods.volume/100,e}}]),e}(),fe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={sounds:[]},n}return Object(m.a)(a,[{key:"onClick",value:function(e){e.play()}},{key:"componentDidMount",value:function(){for(var e=this,t=function(){var t=Object(d.a)(n[a],2),o=t[0],i=t[1];i.onloadeddata=function(){var e=i.duration,t={name:o,sound:i,duration:e};this.setState({sounds:[].concat(Object(u.a)(this.state.sounds),[t])})}.bind(e)},a=0,n=Object.entries(ce);a<n.length;a++)t()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h3",null,"Click here to listen to sounds!"),o.a.createElement("div",{className:"buttons"},this.state.sounds.map((function(t){return o.a.createElement("div",{key:t.name},o.a.createElement(v.a,{onClick:function(){return e.onClick(t.sound)},variant:"info",size:"lg"},t.name),o.a.createElement("h6",null,o.a.createElement("small",{className:"text-muted"},"dur: ",Math.round(100*t.duration)/100,"s")))}))))}}]),a}(n.Component),ge=a(24),ye=a(125);function be(e){if(e.startsWith("Add"))!function(e){var t=e.split(","),a=function(e){var t,a,n=e.split(" "),o=-1;if(5!=n.length||"as"!=n[1].trim()||"at"!=n[3])throw"Invalid Parameter in Add: "+e;t=we(n[0].replace("sound_","").trim()),a=we(n[2]),isNaN(n[4])||(o=parseFloat(n[4]));if(o<0||o>=60)throw"Invalid Parameter in Add: "+e;return{soundID:t,soundPos:o,soundName:a}}(t.shift()),n=function(e){var t,a={length:null,interval:null,volume:100,speed:1},n=Object(le.a)(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;a=Ee(o,a)}}catch(i){n.e(i)}finally{n.f()}return a}(t),o=new ve(a.soundID,a.soundPos,a.soundName,n);de.addSound(o)}(e.replace("Add","").trim());else if(e.startsWith("Remove")){!function(e){if(!de.removeSound(e))throw"Invalid ID in Remove Sound: "+e}(we(e.replace("Remove","").trim()))}else{if(!e.startsWith("Restart"))throw"Invalid command found: "+e;if(e=e.replace("Restart","").trim())throw"Additional Parameter(s) Found in Restart Command: "+e;de.clearSounds()}}function we(e){if(!e.match(/^[A-Za-z0-9]+$/))throw"Invalid Sound ID specified: "+e;return e}function Ee(e,t){var a=e.trim().split(" ");if(0==a.length||1==a.length)throw"Invalid Effects: "+e;switch(a[0].trim()){case"length":if(2!=a.length&&4!=a.length)throw"Invalid Parameters in Length: "+a;if(t.length=ke(a[1]),4==a.length&&(t.interval=ke(a[3]),t.interval>=60||t.interval<=0))throw"Invalid Parameters in Interval: "+a;if(t.length>60||t.length<=0)throw"Invalid Parameters in Length: "+a;break;case"volume":var n=parseInt(a[1]);if(2!=a.length||n<0||n>=300)throw"Invalid Parameters in Volume: "+a;t.volume=n;break;case"speed":if(2!=a.length)throw console.log(a),"Invalid Parameters in Speed: "+a;if(t.speed=ke(a[1]),t.speed<=0||t.speed>=3)throw console.log(a),"Invalid Parameters in Speed: "+a;break;default:throw"Invalid Effect Type: "+a}return t}function ke(e){try{return parseFloat(e)}catch(t){throw"Error while parsing float value: "+e}}var Ae=a(73),xe=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={soundLines:[]},n.containerRef=o.a.createRef(),n.getRectsInterval=void 0,n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getRectsInterval=setInterval((function(){var t=e.containerRef.current.getBoundingClientRect();e.setState({soundLines:e.getSoundLines(t)})}),10)}},{key:"componentWillUnmount",value:function(){clearInterval(this.getRectsInterval)}},{key:"getSoundLines",value:function(e){return Object.keys(de.sounds).map((function(t,a){return o.a.createElement(Oe,{sound:de.sounds[t],canvas:e,index:a+1,key:t})}))}},{key:"renderLines",value:function(){return Array(15).fill(null).map((function(e,t){return o.a.createElement(Se,{left:6.7*t,index:t,key:t})}))}},{key:"render",value:function(){return o.a.createElement("div",{className:"soundTable"},o.a.createElement(Ce,{soundList:de.sounds}),o.a.createElement("div",{className:"linesContainer",ref:this.containerRef},o.a.createElement("div",{className:"soundLabelPadding"}),this.renderLines(),this.state.soundLines))}}]),a}(n.Component),Se=function(e){var t=e.left,a=e.index,n=parseInt(4*a);return o.a.createElement("div",{className:"verticalLine",style:{left:"".concat(t,"%")}},o.a.createElement("p",{className:"time"}," ",n))},Oe=function(e){var t=e.sound,a=e.canvas,n=e.index,i=function(e,t,a){if(!e.soundBuffer)return[];var n=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,o=[],i=t.width/60,r=n+t.top,s=.05*t.height*a+.01*t.height,l=r+s,u=t.left+2+i*e.pos,d=i*e.soundMods.length,c=i*ce[e.id].duration/e.soundMods.speed;e.soundMods.length&&!e.soundMods.interval&&(c=d);var m=u+c;m>=t.right&&(m=t.right-2);if(o.push({x0:u,x1:m,y:l}),e.soundMods.interval){var h=i*e.soundMods.interval,p=u+d;p>=t.right&&(p=t.right-2);for(var v=u+h;v<p;v+=h)m=v+c>=p?p:v+c,o.push({x0:v,x1:m,y:l})}return o}(t,a,n);return o.a.createElement("div",{className:"soundLineRow"},i.map((function(e){return o.a.createElement(Ae.Line,{key:"2",x0:e.x0,y0:e.y,x1:e.x1,y1:e.y,borderColor:t.color,borderWidth:5,borderStyle:"outset"})})))},Ce=function(e){var t=e.soundList;return o.a.createElement("div",{className:"soundLabelContainer"},o.a.createElement("div",{className:"soundLabelPadding"},"Time"),Object.keys(t).map((function(e){return o.a.createElement("div",{key:e,className:"soundLabel"},e)})))};var Ie=xe,je=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={playing:!1,display:"Play",time:0,start:0},n}return Object(m.a)(a,[{key:"playOrPause",value:function(){this.state.playing?this.stopSounds():this.playSounds()}},{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),100)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var e=de.isPlaying();e||clearInterval(this.timer),this.setState({playing:e,display:e?"Stop":"Play"})}},{key:"playSounds",value:function(){var e=this;Object.keys(de.sounds).length&&(de.playSounds(),this.setState({time:0,start:Date.now()}),this.timer=setInterval((function(){return e.setState({time:Date.now()-e.state.start})}),10))}},{key:"stopSounds",value:function(){de.stopSounds(),clearInterval(this.timer)}},{key:"displayTime",value:function(){return Math.round(this.state.time/1e3*100)/100}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{class:"timerContainer"},o.a.createElement(v.a,{onClick:function(){return e.playOrPause()},variant:"success",type:"button",style:{marginRight:"20px"}},this.state.display),o.a.createElement("div",{class:"timer"}," ",this.displayTime().toFixed(2)," seconds "))}}]),a}(n.Component),Me=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={commandOutput:[],commandInput:""},n.handleSubmit=n.handleSubmit.bind(Object(ge.a)(n)),n.handleChange=n.handleChange.bind(Object(ge.a)(n)),n}return Object(m.a)(a,[{key:"handleChange",value:function(e){this.setState({commandInput:e.target.value})}},{key:"handleSubmit",value:function(e){var t;e.preventDefault();try{!function(e){fetch("https://cityofcoquitlam.perfectmind.com/Contacts/BookMe4/GetEvent?eventId=f578e2bb-8078-4755-9bb0-c24640c1571f&widgetId=15f6af07-39c5-473e-b053-96653f77a406").then((function(e){return e.json()})).then((function(e){return console.log(e)}));var t,a=e.split(";"),n=Object(le.a)(a);try{for(n.s();!(t=n.n()).done;){var o=t.value;(o=o.trim())&&be(o)}}catch(i){n.e(i)}finally{n.f()}}(this.state.commandInput),t={time:(new Date).toLocaleString(),text:e.target.DSLCommand.value,error:null}}catch(a){console.error(a),t={time:(new Date).toLocaleString(),text:e.target.DSLCommand.value,error:a}}this.setState({commandOutput:[].concat(Object(u.a)(this.state.commandOutput),[t])}),this.setState({commandInput:""})}},{key:"playSounds",value:function(){de.playSounds()}},{key:"render",value:function(){return o.a.createElement("div",{className:"allContent"},o.a.createElement("div",{className:"flex-child-input"},o.a.createElement("div",{className:"inputform"},o.a.createElement(ye.a,{onSubmit:this.handleSubmit},o.a.createElement(ye.a.Group,{controlId:"DSLCommand"},o.a.createElement(ye.a.Label,null,"Input DSL Command Here"),o.a.createElement(ye.a.Control,{as:"textarea",rows:"10",type:"text",name:"DSLCommand",value:this.state.commandInput,onChange:this.handleChange}),o.a.createElement(ye.a.Text,{className:"text-muted"},"Please enter DSL text commands here")),o.a.createElement(v.a,{variant:"info",type:"submit"},"Submit"))),o.a.createElement(je,null),o.a.createElement("br",null),o.a.createElement("h3",null,"Commands History"),o.a.createElement("div",{className:"commandsHistory"},0==this.state.commandOutput.length&&o.a.createElement("h5",null,o.a.createElement("small",{className:"text-muted"},"You have not executed any commands yet")),this.state.commandOutput.slice().reverse().map((function(e){return o.a.createElement("div",{key:e},!e.error&&o.a.createElement("h5",null,o.a.createElement("i",null,o.a.createElement("small",null,e.time)," "),o.a.createElement("small",null,e.text)),e.error&&o.a.createElement("h5",{className:"text-danger"},o.a.createElement("i",null,o.a.createElement("small",null,e.time)," "),o.a.createElement("small",null,e.error)))})))),o.a.createElement(Ie,{class:"flex-child-table"}))}}]),a}(n.Component);var Ne=function(){return o.a.createElement("div",{className:"commands"},o.a.createElement(fe,null),o.a.createElement(Me,null))},Le=a(127),Pe=a(126),De=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(Le.a,{bg:"info",expand:"lg"},o.a.createElement(Le.a.Brand,{className:"text-white",href:"https://elvin-hwang.github.io/Audio-Mixer/"},"SOUNDAPP"),o.a.createElement(Le.a.Toggle,{"aria-controls":"basic-navbar-nav"}),o.a.createElement(Pe.a,null,o.a.createElement(Pe.a.Link,{className:"d-inline p-2 text-white",href:"https://elvin-hwang.github.io/Audio-Mixer/#/dsl"},"Our DSL")))}}]),a}(n.Component),Re=a(128),_e=a(129),Be=a(130),Te=a(79),He=a.n(Te),We=function(e){Object(h.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).note="Note: You can change an existing sound you have added simply by calling Add, with the same name of the sound you added. It also might be helpful to copy the entire command that you put in before, and keep adding on to it",e.samples=[{eventKey:"1",title:"Sample Music 1",text:["Add sound_buildup as buildup1 at 0, length 11.42;","Add sound_snarebuild as buildup2 at 0;","Add sound_drop as drop at 12, volume 299;","Add sound_atmosphereHigh as drop1 at 11.3, length 0.7;","Add sound_atmosphere as drop2 at 13.7;","Add sound_trumprich as voiceover at 10.4, volume 250;","Add sound_lofidrum as lofidrum1 at 11.3, speed 1.2, length 10;","Add sound_trumpmilliondollar as dollars at 14.8, speed 0.8, volume 100;","Add sound_wobble as wobble at 18, length 20;","Add sound_trumpamerica as murica at 22, speed 0.9;","Add sound_trumprich as rich at 23, speed 0.75, volume 200;","Add sound_organ as organ at 31.6, volume 30;","Add sound_organ as organ2 at 46;","Add sound_lofidrum as lofidrum2 at 46, speed 0.9, volume 60, length 14;"]},{eventKey:"2",title:"Sample Music 2",text:["Add sound_synthchorus as synthochorus1 at 0, volume 50; Add sound_midChorus as midchorus at 24, length 36, volume 70;","Add sound_synthchorus as synthchorus2 at 24, length 36 (interval 12), volume 50;","Add sound_buildup as buildup at 36;","Add sound_highChorus as highchorus at 48, volume 70;","Add sound_lofidrum as lofidrum at 48, speed 1.05, length 12 (interval 6);","Add sound_kick as kick at 24, speed 2, volume 60, length 20 (interval 1.5);","Add sound_hat as hat at 36, length 12 (interval 1.5);","Add sound_hat as hatFast1 at 47.5, length 0.5 (interval 0.1);","Add sound_hat as hatFast2 at 58, length 0.5 (interval 0.1);","Add sound_snare as snare at 48.75, length 12 (interval 1.5);"]}],e}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"inputform"},o.a.createElement(Re.a,{class:"figurepic"},o.a.createElement(Re.a.Image,{src:He.a}),o.a.createElement(Re.a.Caption,null,"SoundApp DSL"))),o.a.createElement(_e.a,{className:"accord"},this.samples.map((function(e){return o.a.createElement(Be.a,{className:"accordcards"},o.a.createElement(_e.a.Toggle,{as:Be.a.Header,eventKey:e.eventKey},e.title),o.a.createElement(_e.a.Collapse,{eventKey:e.eventKey},o.a.createElement(Be.a.Body,{className:"accordtext"},o.a.createElement("div",null,e.text.map((function(e){return o.a.createElement("h6",null,e)}))))))}))),o.a.createElement("h4",{className:"text-muted"},o.a.createElement("small",null,this.note)))}}]),a}(n.Component);a(119);var Ke=function(){return o.a.createElement(s.a,{basename:"/Audio-Mixer"},o.a.createElement("div",{className:"App"},o.a.createElement(De,null),o.a.createElement("div",{className:"App-header"},o.a.createElement(l.c,null,o.a.createElement(l.a,{path:"/",component:Ne,exact:!0}),o.a.createElement(l.a,{path:"/dsl",component:We})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Ke,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},19:function(e,t,a){},40:function(e,t,a){e.exports=a.p+"static/media/trump-A-Million-Dollars.e0aac125.wav"},41:function(e,t,a){e.exports=a.p+"static/media/trump-America.87d2ed07.wav"},42:function(e,t,a){e.exports=a.p+"static/media/trump-bigger.3560f2cc.wav"},43:function(e,t,a){e.exports=a.p+"static/media/trump-Im-Really-Rich.fe46ed95.wav"},44:function(e,t,a){e.exports=a.p+"static/media/atmosphere.5b163b2d.wav"},45:function(e,t,a){e.exports=a.p+"static/media/atmosphereHigh.5a966d8c.wav"},46:function(e,t,a){e.exports=a.p+"static/media/buildup.f1514e0d.wav"},47:function(e,t,a){e.exports=a.p+"static/media/drop.04530777.wav"},48:function(e,t,a){e.exports=a.p+"static/media/hat.afb28490.wav"},49:function(e,t,a){e.exports=a.p+"static/media/HighChorus.0df2e0f1.wav"},50:function(e,t,a){e.exports=a.p+"static/media/kick.5b1bcb70.wav"},51:function(e,t,a){e.exports=a.p+"static/media/lofiDrum.ee5fac94.wav"},52:function(e,t,a){e.exports=a.p+"static/media/MidChorus.d3e451db.wav"},53:function(e,t,a){e.exports=a.p+"static/media/organ.8f4f6a9c.wav"},54:function(e,t,a){e.exports=a.p+"static/media/snare.91a6ded8.wav"},55:function(e,t,a){e.exports=a.p+"static/media/snareBuild.a5462aed.wav"},56:function(e,t,a){e.exports=a.p+"static/media/SynthChorus.fc388833.wav"},57:function(e,t,a){e.exports=a.p+"static/media/Wobble.6cb16ac1.wav"},68:function(e,t,a){e.exports=a.p+"static/media/buong.ba43e9e0.wav"},69:function(e,t,a){e.exports=a.p+"static/media/electroChorus.24e14281.wav"},70:function(e,t,a){e.exports=a.p+"static/media/PianoBackground.a81654dc.wav"},71:function(e,t,a){e.exports=a.p+"static/media/PianoChorus.ace88ae7.wav"},72:function(e,t,a){e.exports=a.p+"static/media/shakerLoop.ba6d7136.wav"},79:function(e,t,a){e.exports=a.p+"static/media/dsl.979d72c1.png"},83:function(e,t,a){e.exports=a(122)},88:function(e,t,a){},89:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.8eb1a395.chunk.js.map